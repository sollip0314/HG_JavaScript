<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        document.addEventListener('DOMContentLoaded', () =>{
            // ìƒìˆ˜ ì •ì˜: localStorageì— ì‚¬ìš©í•  í‚¤(Key)ë¥¼ ìƒìˆ˜ë¡œ ì§€ì •í•˜ì—¬ ì˜¤íƒ€ ë°©ì§€ ë° ê´€ë¦¬ ìš©ì´
            const STORAGE_KEY = 'userInput';

            const color = localStorage.getItem('color')

            

            // DOM ìš”ì†Œ ì„ íƒ: ëª…í™•í•œ ID ì…€ë ‰í„° ì‚¬ìš© (querySelector('#id'))
            const p = document.querySelector('#status-message') // <p> íƒœê·¸ì— IDë¥¼ ì¶”ê°€í–ˆë‹¤ê³  ê°€ì •
            const input = document.querySelector('#user-input')
            const button = document.querySelector('#clear-button')
            const select = document.querySelector('select')
            // const p = document.querySelector('p')

            /*
             * 1. ì´ˆê¸° ë¡œë”© ì‹œ ì €ì¥ëœ ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
             * localStorage: ì›¹ ë¸Œë¼ìš°ì €ì— ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê°ì²´ (Key-Value ìŒ)
             */
            const savedValue = localStorage.getItem('í‚¤'); // getItem(key): ì €ì¥ëœ ê°’ì„ ì¶”ì¶œ
            // const saveValue = localStorage.getItem('input') // getItem : ì €ì¥ëœ ê°’ì„ ì¶”ì¶œ
            // const saveValue = localStorage.input

            if (savedValue) {
                // ì €ì¥ëœ ê°’ì´ ìˆìœ¼ë©´ Inputì— ê°’ ì„¤ì • ë° ìƒíƒœ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
                input.value = savedValue;
                p.textContent = `âœ… ì´ì „ ì‹¤í–‰ ë•Œ ì €ì¥ëœ ë§ˆì§€ë§‰ ê°’: "${savedValue}"`;
            } else {
                p.textContent = 'ì •ë³´ê°€ ì €ì¥ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.';
            }

            if(color != null){
                document.body.style.backgroundColor = color
                select.value = color
            }else{
                document.body.style.backgroundColor = 'red'
            }

            /*
             * 2. Input ê°’ ë³€ê²½ ê°ì§€ ë° ì‹¤ì‹œê°„ ì €ì¥ (ì“°ê¸°)
             */
            input.addEventListener('keyup', (event) => {
                const value = event.currentTarget.value;
                // setItem(key, value): ì›¹ ìŠ¤í† ë¦¬ì§€ì— ë°ì´í„° ì €ì¥ (Key-Value)
                localStorage.setItem('í‚¤', value); 
                // localStorage.setItem('input', value)
                // localStorage.input = value
                p.textContent = `ğŸ“ í˜„ì¬ ì…ë ¥ ê°’: "${value}" (ìë™ ì €ì¥ë¨)`;
                
            });


            /*
             * 3. ë²„íŠ¼ í´ë¦­ ì‹œ ì €ì¥ëœ ê°’ ì‚­ì œ
             */
            button.addEventListener('click', () => {
                // **ì£¼ì˜**: localStorage.clear()ëŠ” ì´ ë„ë©”ì¸ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì§€ì›ë‹ˆë‹¤.
                // íŠ¹ì • í‚¤ì˜ ê°’ë§Œ ì§€ìš°ë ¤ë©´: localStorage.removeItem(STORAGE_KEY) ì‚¬ìš©ì´ ê¶Œì¥ë©ë‹ˆë‹¤.
                localStorage.removeItem('í‚¤'); 
                
                // UI ì´ˆê¸°í™”
                input.value = '';
                p.textContent = 'ğŸ—‘ï¸ ì €ì¥ëœ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.';
                input.focus(); // ì‚¬ìš© í¸ì˜ë¥¼ ìœ„í•´ ì…ë ¥ë€ì— í¬ì»¤ìŠ¤ ì´ë™
            });

            select.addEventListener('change', () => {
                const color = select.options[select.selectedIndex].value
                document.body.style.backgroundColor = color;
                localStorage.setItem('ì¹¼ë¼', color)
            })
        });
    </script>
</head>
<body>
    <p id="status-message">ì €ì¥ëœ ê°’ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    <button id = "clear-button">ì§€ìš°ê¸°</button>
    <label for="user-input">ê°’ ì…ë ¥:</label>
    <input type="text" id="user-input">

    <select name="" id="">
        <option value="red">ë¹¨ê°„ìƒ‰</option>
        <option value="blue">íŒŒë€ìƒ‰</option>
        <option value="green">ì´ˆë¡ìƒ‰</option>
    </select>
</body>
</html>